# liberte

**Mini framework based on aiogram".**

liberte ‚Äî —ç—Ç–æ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π –º–∏–Ω–∏-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Telegram-–±–æ—Ç–æ–≤
—Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, CLI –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –º–æ–¥—É–ª–µ–π.

## –û–±—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ

- üîå –ü–ª–∞–≥–∏–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π
- üß© –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö –º–æ–¥—É–ª–µ–π (childes)
- üõ† CLI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π
- üß† –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ —Ä–æ—É—Ç–µ—Ä–æ–≤
- üìã –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ pyproject.toml


## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python **3.8+**

–ü—Ä–æ–≤–µ—Ä–∫–∞;

```bash
python --version
```


### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/razielSan/liberte.git
cd liberte
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv venv<br>
source venv/bin/activate      # Linux/MacOS<br>
venv\Scripts\activate         # Windows<br></pre>
```


### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π 

–ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```bash
pip install -e .[dev]
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π–ª–∞ .env

---

**–¢–û–ö–ï–ù –¥–ª—è –±–æ—Ç–∞**

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –ø–∞–ø–∫–µ src/app/bot/

.env

```bash
TOKEN=YOUR_TOKEN
```


### 6. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
bot
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
‚îú‚îÄ‚îÄ src/
‚îÇ    ‚îú‚îÄ‚îÄapp/ # –ø–∞–ø–∫–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ bot/ # —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
‚îÇ    ‚îÇ    ‚îÇ   ‚îú‚îÄ‚îÄcore/
‚îÇ    ‚îÇ    ‚îÇ   ‚îî‚îÄ‚îÄmodules/
‚îÇ    ‚îÇ    ‚îÇ   extentsions..py
‚îÇ    ‚îÇ    ‚îÇ   main.py
‚îÇ    ‚îÇ    ‚îÇ   settings.py
‚îÇ    ‚îÇ    ‚îÇ   
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ app_utils/
‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ core/
‚îÇ    ‚îÇ    main.py
‚îÇ    ‚îÇ    settings.py
‚îÇ    ‚îÇ    
‚îÇ    ‚îî‚îÄ‚îÄcore/ # —è–¥—Ä–æ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ          ‚îú‚îÄ‚îÄ context/
‚îÇ          ‚îú‚îÄ‚îÄ contracts/
‚îÇ          ‚îú‚îÄ‚îÄ error_handlers/
‚îÇ          ‚îú‚îÄ‚îÄ logging/
‚îÇ          ‚îú‚îÄ‚îÄ module_loader/
‚îÇ          ‚îú‚îÄ‚îÄ paths/
‚îÇ          ‚îú‚îÄ‚îÄ context/
‚îÇ          ‚îú‚îÄ‚îÄ response/
‚îÇ          ‚îú‚îÄ‚îÄ scripts/
‚îÇ          ‚îî‚îÄ‚îÄ utils/
‚îÇ          cli.py
‚îÇ
‚îú‚îÄ‚îÄdocs/
‚îî‚îÄ‚îÄtests/
CONTRIBUTING.MD
LICENSE
pyproject.toml
pytest.ini
README.MD
```

## üõ† CLI Usage

**–°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π**

```bash
cli add-module test.test
```

**–£–¥–∞–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è**

```bash
cli remove-module test
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª–µ–π

- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è –¥–æ—á–µ—Ä–Ω–∏–µ –º–æ–¥—É–ª–∏ –±—É–¥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ childes

- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ handlers.**–ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–æ–ª–∂–Ω–æ**
  **–±—ã—Ç—å 'router', –¥—Ä—É–≥–∏–µ –∏–º–µ–Ω–∞ –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è**
  –ò–º—è `router` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π –∏ —è–≤–ª—è–µ—Ç—Å—è –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º.

  ```python
  router = Router(name=__name__)
  ```
  
- –ï—Å–ª–∏ —É –º–æ–¥—É–ª—è –µ—Å—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –º–æ–¥—É–ª–∏ (`childes`), —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç 
  inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –Ω–∏–º. –ö–Ω–æ–ø–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ `settings` 
  –¥–æ—á–µ—Ä–Ω–∏—Ö –º–æ–¥—É–ª–µ–π.

- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø—Ä–µ–¥–ø–æ–ª–æ–≥–∞–µ—Ç—Å—è —á—Ç–æ –¥–æ—á–µ—Ä–Ω–∏–π –º–æ–¥—É–ª—å –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –∏–Ω–ª–∞–π–Ω –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ
  —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –º–æ–¥—É–ª—è —á–µ—Ä–µ–∑ settings.MENU_CALLBACK_DATA, –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –≤ —Ñ–∞–π–ª–µ settings.py
  –¥–æ—á–µ—Ä–Ω–µ–≥–æ –º–æ–¥—É–ª—è.–ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ –∫–∞–∫ –≤–∞–º —É–¥–æ–±–Ω–µ–µ

  ```python
  @router.callback_query(F.data == settings.MENU_CALLBACK_DATA)
  asyn def childe_test_module():
    ...
  ```

- –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –º–æ–¥—É–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –∫ main –º–æ–¥—É–ª—é –ø—Ä–∏ –∏—Ö —Å–æ–∑–¥–∞–Ω–∏–∏.
  –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø—Ä–µ–¥–ø–æ–ª–æ–≥–∞–µ—Ç—Å—è —á—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –º–æ–¥—É–ª—å –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ main –º–æ–¥—É–ª—é
  —á–µ—Ä–µ–∑ settings.MENU_REPLY_TEXT, –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –≤ —Ñ–∞–π–ª–µ settings.py —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –º–æ–¥—É–ª—è
  –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ –∫–∞–∫ –≤–∞–º —É–¥–æ–±–Ω–µ–µ
  
  ```python
  @router.message(F.text == settings.MENU_REPLY_TEXT)
  asyn def parent_test_module():
    ...
  ```
- –§–∞–π–ª—ã response.py, router.py –∏–∑–º–µ–Ω—è—Ç—å –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. –ü—Ä–∏ –∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–∏
  —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è. –í–Ω–æ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫

- –í –∫–ª–∞—Å—Å–µ ModuleSettings –Ω–µ —É–¥–∞–ª—è–π—Ç–µ –Ω–∏ –æ–¥–Ω–æ –∏–∑ –ø–æ–ª–µ–π –∏ –Ω–µ –∏–∑–º–µ–Ω—è–π—Ç–µ –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π settings.
  **–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ–ª–µ–π**

  ```python
  class MainRouterSettings(BaseModel):
    MENU_REPLY_TEXT: str = "main" 
    MENU_CALLBACK_TEXT: str = "main"
    MENU_CALLBACK_DATA: str = "main"
  ```
  –ú–æ–∂–Ω–æ —Ç–∞–∫ –∂–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç BaseSettings.

- –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –º–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ **reply-–∫–Ω–æ–ø–∫–∏**,  
   –∞ –¥–æ—á–µ—Ä–Ω–∏–µ ‚Äî —á–µ—Ä–µ–∑ **inline-–∫–Ω–æ–ø–∫–∏**.

- –ü—Ä–∏ –∑–∞–ø—É–∫—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è log —Ñ–∞–π–ª—ã(app/logs) –∏ 
  temp –ø–∞–ø–∫–∏(app/bot/temp) –¥–ª—è –º–æ–¥—É–ª–µ–π

- –õ–æ–≥ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π –∞ temp –ø–∞–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
  –º–æ–¥—É–ª—è


## –ü–æ–ª–µ–∑–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤ router

**–ü–µ—Ä–µ–¥–∞—é—Å—è —á–µ—Ä–µ–∑ Dispatcher –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**

### 1. session - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞

```python
@router.message(F.text == "test)
async def test(message, session):
        ....
```

### 2. get_main_keyboards - –≥–ª–∞–≤–Ω–∞—è reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –º–æ–¥—É–ª—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π

```python
@router.message(F.text == "test")
async def test(message, get_main_keyboards):
    await message.answer(text="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", reply_markup=get_main_keyboards)
```

## üß© Modules

–ú–æ–¥—É–ª—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–∞—Ç–∞–ª–æ–≥ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

- router.py
- handlers/
- response.py
- settings.py
- childes/ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–¥—É–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–ü—Ä–∏–º–µ—Ä –º–æ–¥—É–ª—è

```text
music/
  ‚îú‚îÄ handlers/
  ‚îú‚îÄ api/
  ‚îú‚îÄ fsm/
  ‚îú‚îÄ services/ 
  ‚îú‚îÄ utils/
  ‚îú‚îÄ services/
  ‚îú‚îÄ childes/
  ‚îÇ  ‚îî‚îÄ playlist/
  router.py
  settings.py
  response.py
  extensions.py
```

# üß™ Tests

<pre>pytest tests</pre>

## üìå Status

Core API —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–º.


## :telephone: **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**

–ï—Å–ª–∏ –Ω–∞—à–ª–∏ –æ—à–∏–±–∫—É - —Å–æ–∑–¥–∞–π—Ç–µ Issue –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ Telegram

[–ú–æ–π —Ç–µ–ª–µ–≥—Ä–∞–º](https://t.me/razielasus)